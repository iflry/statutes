% Font settings
\usepackage[fira]{fontsetup}

% Page layout settings
\usepackage[a4paper, margin=1in, top=1.2in, bottom=1.2in]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textit{Statutes of the International Federation of Liberal Youth}} % Custom header text
\fancyhead[R]{\thepage} % Page number on the top right
\renewcommand{\headrulewidth}{0.4pt} % Line under the header
\renewcommand{\footrulewidth}{0.4pt} % Line above the footer

% Paragraph settings
\usepackage{parskip}
\setlength{\parskip}{1.2em} % Space between paragraphs
\setlength{\parindent}{0em} % No paragraph indentation

% Section and subsection formatting
\usepackage{titlesec}
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}
\titleformat{\section}{\normalfont\scshape\Large}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\scshape\large}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\itshape}{\thesubsubsection}{1em}{}

% Line spacing
\usepackage{setspace}
\onehalfspacing % 1.5 line spacing for readability

% Justify text
\usepackage{ragged2e}
\justifying % Justify all text to align both left and right

% Legal numbering and indentation for lists
\usepackage{enumitem}
\setlist[itemize,1]{label=--, left=0em} % Custom bullet points for itemized lists
\setlist[enumerate,1]{label=\arabic*., left=0em, itemsep=0.5em} % Numbered lists with legal style

% Table of contents settings
\usepackage{tocloft}
\renewcommand{\cftsecfont}{\scshape} % Small caps for section titles in TOC
\renewcommand{\cftsubsecfont}{\small\itshape} % Italic for subsection titles in TOC
\setlength{\cftbeforesecskip}{1em} % Space before sections in TOC
\setlength{\cftbeforesubsecskip}{0.5em} % Space before subsections in TOC
\setcounter{tocdepth}{2}

% Hyperlinks settings
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=black,      
    urlcolor=blue, 
    pdftitle={Statutes of IFLRY},
    pdfauthor={International Federation of Liberal Youth},
    pdfsubject={Legal Document},
    pdfpagemode=FullScreen,
}

\usepackage{nameref}   
\usepackage{ifthen} 
\usepackage{xcolor} 

% Custom command to format the link with section number and title
\newcommand{\customref}[2]{%
  {\color{blue}\hyperref[{#2}]{#1 \ref{#2}: \nameref{#2}}}%
}

% Save the original \hyperref command for later use
\let\originalhyperref\hyperref
% Save the original \hyperlink command for later use
\let\originalhyperlink\hyperlink
% Save the original \href command for later use
\let\originalhref\href

% % Redefine \hyperref to conditionally use your custom format
% \renewcommand{\hyperref}[2][]{%
%   \ifthenelse{\equal{#2}{article}}{%
%     \customref{#1}% Use custom reference if "article"
%   }{%
%     \originalhyperref[#1]{#2}% Otherwise, use normal behavior
%   }%
% }

% \renewcommand{\hyperlink}[2]{%
%   \ifthenelse{\equal{#2}{article}}{%
%     \customref{#1}% Use custom reference if the link text is "article"
%   }{%
%     \originalhyperlink{#1}{#2}% Otherwise, use normal behavior
%   }%
% }

% % Redefine \hyperref to conditionally use your custom format
% \renewcommand{\href}[2][]{%
%   \ifthenelse{\equal{#2}{article}}{%
%     \customref{#1}% Use custom reference if "article"
%   }{%
%     \originalhref[#1]{#2}% Otherwise, use normal behavior
%   }%
% }

% Add a page border to make it look more formal
\usepackage{fancybox}
\setlength{\fboxsep}{10pt} % Border width
\renewcommand{\fboxrule}{0.5pt} % Border thickness

\AtBeginDocument{
    \maketitle
    \tableofcontents
    \clearpage
}